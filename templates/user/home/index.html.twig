{% extends 'user/baseUser.html.twig' %}

{% block body %}
    <section class="home bg-lightGrey">
        <div class="home-content">
            <div class="row">
                <div class="col-md-12">
                    <div class="livingThing-card">
                        <div class="livingThing-card-header">
                            <span class="livingThing-card-title">Resume</span>
                        </div>
                        <div class="livingThing-card-body">
                            <div class="row">
                                <div class="col-md-3">
                                    <div class="livingThing-box">
                                        <div class="livingThing-box-header">
                                            <span class="card-title">Living Being</span>
                                        </div>
                                        <div class="livingThing-box-body">
                                            <p class="card-text">{{ nbrLivingBeing }}</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="livingThing-box">
                                        <div class="livingThing-box-header">
                                            <span class="card-title">Element</span>
                                        </div>
                                        <div class="livingThing-box-body">
                                            <p class="card-text">{{ nbrElement }}</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="livingThing-box">
                                        <div class="livingThing-box-header">
                                            <span class="card-title">Mineral</span>
                                        </div>
                                        <div class="livingThing-box-body">
                                            <p class="card-text">{{ nbrMineral }}</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                {# Recent Posts Section #}
                <div class="col-md-6">
                    <div class="recent-activity-card">
                        <div class="recent-activity-card-header">
                            <span class="recent-activity-card-title">Latest Posts</span>
                        </div>
                        <div class="recent-activity-card-body">
                            {% if recent_posts != [] %}
                                {% for onePost in recent_posts %}
                                    <div class="post">
                                        <div class="post-content">
                                            <div class="post-header">
                                                {% if onePost.articleLivingThing != null %}
                                                    {% if onePost.articleLivingThing.livingThing != null %}
                                                        <span class="post-title"><a href="{{ path('articleLivingThingByID', {'name': onePost.articleLivingThing.livingThing.kingdom|kingdom, 'id': onePost.id}) }}">{{ onePost.title }}</a></span>
                                                    {% endif %}
                                                {% elseif onePost.articleElement != null %}
                                                    {% if onePost.articleElement.element != null %}
                                                        <span class="post-title"><a href="{{ path('articleElementByID', {'id': onePost.id}) }}">{{ onePost.title }}</a></span>
                                                    {% endif %}
                                                {% elseif onePost.articleMineral != null %}
                                                    {% if onePost.articleMineral.mineral != null %}
                                                        <span class="post-title"><a href="{{ path('articleMineralByID', {'id': onePost.id}) }}">{{ onePost.title }}</a></span>
                                                    {% endif %}
                                                {% endif %}
                                            </div>
                                            <div class="post-body">
                                                <span class="post-text">
                                                    {% if onePost.updatedAt is null or date(onePost.createdAt) >= date(onePost.updatedAt) %} 
                                                        Created at {{ onePost.createdAt|date("Y-m-d H:i:s") }} 
                                                    {% else %}
                                                        Updated at {{ onePost.updatedAt|date("Y-m-d H:i:s") }}
                                                    {% endif %}
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                {% endfor %}

                                <div class="post-button">
                                    <a class="btn btn-custom-blue" href="{{ path('news') }}"><span>See More</span></a>
                                </div>
                            {% else %}
                                <p class="text-center">No article has been found.</p>
                            {% endif %}
                        </div>
                    </div>
                </div>

                {# Notifications Section #}
                <div class="col-md-6">
                    <div class="notification-card">
                        <div class="notification-card-header">
                            <span class="notification-card-title">Notifications</span>
                        </div>
                        <div class="notification-card-body">
                            {% if notifications != null %}
                                {% for notification in notifications %}
                                    <div class="post">
                                        <div class="post-content">
                                            <div class="post-header">
                                                <span class="post-title">{{ notification.content }}</span>
                                            </div>
                                            <div class="post-body">
                                                <span class="post-text">Created at {{ notification.createdAt|date('Y-m-d H:s:i') }}</span>
                                            </div>
                                        </div>
                                    </div>
                                {% endfor %}
                                
                                <div class="post-button">
                                    <a class="btn btn-custom-blue" href="{{ path('userNotifs') }}"><span>See More</span></a>
                                </div>
                            {% else %}
                                <p class="text-center">You have no notifications</p>
                            {% endif %}
                        </div>
                    </div>
                </div>
                
                {# Recent Conversation Section #}
                {# <div class="col-md-6">
                    <div class="recent-conversation-card">
                        <div class="recent-conversation-card-header">
                            <span class="recent-conversation-card-title">Recent Conversation</span>
                        </div>
                        <div class="recent-conversation-card-body">
                            <div class="post">
                                <div class="post-avatar">
                                    <img class="img-fluid" src="{{ asset('content/users/avatar.png') }}" alt="">
                                </div>
                                <div class="post-content">
                                    <div class="post-header">
                                        <span class="post-title">John Dupont</span>
                                    </div>
                                    <div class="post-body">
                                        <span class="post-text">Hello Garry, are you fine ?</span>
                                    </div>
                                </div>
                            </div>

                            <div class="post">
                                <div class="post-avatar">
                                    <img class="img-fluid" src="{{ asset('content/users/avatar.png') }}" alt="">
                                </div>
                                <div class="post-content">
                                    <div class="post-header">
                                        <span class="post-title">Jorge Johnson</span>
                                    </div>
                                    <div class="post-body">
                                        <span class="post-text">Yeah, i loved this documentary !</span>
                                    </div>
                                </div>
                            </div>

                            <div class="post">
                                <div class="post-avatar">
                                    <img class="img-fluid" src="{{ asset('content/users/avatar.png') }}" alt="">
                                </div>
                                <div class="post-content">
                                    <div class="post-header">
                                        <span class="post-title">Mack Lamy</span>
                                    </div>
                                    <div class="post-body">
                                        <span class="post-text">Hey commoner, stop ignoring me and answer me !</span>
                                    </div>
                                </div>
                            </div>

                            <div class="post">
                                <div class="post-avatar">
                                    <img class="img-fluid" src="{{ asset('content/users/avatar.png') }}" alt="">
                                </div>
                                <div class="post-content">
                                    <div class="post-header">
                                        <span class="post-title">Florian Lopez</span>
                                    </div>
                                    <div class="post-body">
                                        <span class="post-text">Hello Garry, can you help me, please ?</span>
                                    </div>
                                </div>
                            </div>

                            <div class="post-button">
                                <a class="btn btn-custom-blue" href="#"><span>See More</span></a>
                            </div>
                        </div>
                    </div>
                </div> #}
            </div>
        </div>
    </section>
{% endblock %}
